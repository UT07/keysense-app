{
  "scripts": {
    "// === Testing Scripts ===": "",
    
    "// Jest Unit Tests": "",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "test:ci": "jest --ci --coverage --maxWorkers=2",
    
    "// Detox E2E Tests": "",
    "detox:build:ios": "detox build --configuration ios.sim.debug",
    "detox:test:ios": "detox test --configuration ios.sim.debug",
    "detox:build:android": "detox build --configuration android.emu.debug",
    "detox:test:android": "detox test --configuration android.emu.debug",
    
    "// Maestro E2E Tests": "",
    "maestro:test": "maestro test --env .maestro/.env .maestro/flows",
    "maestro:test:ios": "maestro test --platform ios --env .maestro/.env .maestro/flows",
    "maestro:test:android": "maestro test --platform android --env .maestro/.env .maestro/flows",
    "maestro:test:smoke": "maestro test --tag smoke --env .maestro/.env .maestro/flows",
    "maestro:test:critical": "maestro test --tag critical --env .maestro/.env .maestro/flows",
    "maestro:studio": "maestro studio",
    "maestro:record": "maestro record",
    
    "// Run all tests": "",
    "test:all": "./run-all-tests.sh",
    "test:all:ci": "./run-all-tests.sh --skip-maestro",
    
    "// Lint and format": "",
    "lint": "eslint . --ext .js,.jsx,.ts,.tsx",
    "lint:fix": "eslint . --ext .js,.jsx,.ts,.tsx --fix",
    "format": "prettier --write \"**/*.{js,jsx,ts,tsx,json,md}\"",
    "format:check": "prettier --check \"**/*.{js,jsx,ts,tsx,json,md}\"",
    
    "// Type checking": "",
    "typecheck": "tsc --noEmit",
    
    "// Pre-commit hooks": "",
    "precommit": "npm run lint && npm run typecheck && npm run test",
    
    "// Clean and setup": "",
    "clean": "rm -rf node_modules ios/Pods ios/build android/build android/.gradle",
    "clean:test": "rm -rf coverage artifacts test-results .maestro/screenshots",
    "postinstall": "cd ios && pod install || true"
  },
  
  "devDependencies": {
    "// Note: Add these if not already present": "",
    "@testing-library/react-native": "^12.4.0",
    "@testing-library/jest-native": "^5.4.3",
    "jest": "^29.7.0",
    "detox": "^20.13.0",
    "@types/jest": "^29.5.0",
    "eslint": "^8.50.0",
    "prettier": "^3.0.0",
    "typescript": "^5.2.0"
  },
  
  "jest": {
    "preset": "react-native",
    "setupFilesAfterEnv": [
      "@testing-library/jest-native/extend-expect"
    ],
    "transformIgnorePatterns": [
      "node_modules/(?!((jest-)?react-native|@react-native(-community)?)|expo(nent)?|@expo(nent)?/.*|@expo-google-fonts/.*|react-navigation|@react-navigation/.*|@unimodules/.*|unimodules|sentry-expo|native-base|react-native-svg)"
    ],
    "collectCoverageFrom": [
      "src/**/*.{js,jsx,ts,tsx}",
      "!src/**/*.test.{js,jsx,ts,tsx}",
      "!src/**/*.spec.{js,jsx,ts,tsx}",
      "!src/**/__tests__/**",
      "!src/**/index.{js,ts}"
    ],
    "coverageThresholds": {
      "global": {
        "branches": 70,
        "functions": 70,
        "lines": 70,
        "statements": 70
      }
    }
  },
  
  "detox": {
    "test-runner": "jest",
    "runner-config": "e2e/config.json",
    "configurations": {
      "ios.sim.debug": {
        "device": {
          "type": "iPhone 15 Pro"
        },
        "app": "ios.debug"
      },
      "android.emu.debug": {
        "device": {
          "avdName": "Pixel_7_API_34"
        },
        "app": "android.debug"
      }
    },
    "apps": {
      "ios.debug": {
        "type": "ios.app",
        "binaryPath": "ios/build/Build/Products/Debug-iphonesimulator/YourApp.app",
        "build": "xcodebuild -workspace ios/YourApp.xcworkspace -scheme YourApp -configuration Debug -sdk iphonesimulator -derivedDataPath ios/build"
      },
      "android.debug": {
        "type": "android.apk",
        "binaryPath": "android/app/build/outputs/apk/debug/app-debug.apk",
        "build": "cd android && ./gradlew assembleDebug assembleAndroidTest -DtestBuildType=debug"
      }
    }
  }
}
